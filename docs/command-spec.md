# Command Specification
**version**: 0.1
**status**: Draft
**Author**: connor252

---

## 1. 概要

本サービスは、
｢詠唱 → コマンド｣<br>
｢詠唱 → キャラ名 → 召喚｣<br>
｢召喚キャラ → コマンド｣<br>
という魔法世界観をベースとした、
音声コマンド型のスマートホームシステムです。

---

## 2. コマンド体系

本サービスのコマンドは以下の3段階で構成される。

### 2.1 詠唱フェーズ
本サービスを起動させるための”詠唱ワード”

#### 詠唱の役割
- 音声入力を「キャラ召喚、命令モード」へ移行させるスイッチ
- キャラクターを未召喚時は基本的に必要
- キャラクター召喚後は省略も可能（セッション維持のため）

**例**: 
	-  “定義する”
	-  “起動せよ”
	-  “顕現せよ”
（個人で拡張可能）

---

### 2.2 キャラ召喚

操作対象となるキャラを呼び出す。

**例:**
	- "定義する、スライム、召喚"
	- “起動せよ、ゴブリン、召喚"
	- “顕現せよ、オーク、召喚”

召喚されたキャラクターは**セッションとして保持**され、召喚中は詠唱フェーズを省略可能

---

### 2.3 命令フェーズ

キャラクターに命令をする、または自身の魔法としてIoTデバイスを操作する。

#### 自己魔法
**例:**
- 「定義する、電気よつけ」
- 「顕現せよ、ライトよ光れ」

#### キャラへの命令

召喚中のキャラへ直接命令する。詠唱は不要。

**例:**
- 「スライム、電気をつけて」
- 「ゴブリン、電気をつけなさい」

---

## 3. コマンド文法

### 基本要素
- **詠唱**: キャラとのセッション外では必要。（詠唱の言葉は変更可能）
- **キャラ名**: 自分が設定したキャラの名前。（召喚中は詠唱を省略可能、名前変更可能）
- **召喚**: キャラを召喚するためのコマンド。
- **コマンド**: 電気をつけて、カーテン開けて、etc

### 自己魔法
{ 詠唱 },{ コマンド }
(キャラを召喚中でも可能)

### キャラ召喚
{ 詠唱 },{ キャラ名 }, 召喚 

### キャラへの命令
{ キャラ名 },{ コマンド }

---

## 4. キャラ仕様

### 4.1 キャラ共通機能（変更可能）
- キャラの共通アニメーション
- キャラの共通コマンド

### 4.2 個別キャラ（変更可能）
- キャラの個別アニメーション
- キャラの個別コマンド

---

## 5. コマンド仕様

### 5.1 対応コマンド

#### 電気操作
- 電気をON
- 電気をOFF

#### ライト操作（LED/チューブライト）
- ライトを〇色に変更
- ライトのエフェクト変更

### 5.2 実装予定

#### カーテン操作
- カーテンを開ける
- カーテンを閉める

#### アラーム操作
- アラームの実装
- アラームからのカーテン操作
- etc

---

## 6.エラー処理

### 6.1 不明キャラ（例: スライム登録済み）
詠唱、スライム以外の名前 → "そのキャラは未登録です"

### 6.2 デバイス未登録
ライトを付けて → ラズパイ未接続 → "ライトが見つかりません"

### 6.3 コマンド判定不能
判定不能コマンド → "指示が理解できません"

---

## 7. 将来拡張(v2, v3)

- ニュアンス処理（例：「電気つけ、電気ON」 → 状況に応じて ON/OFF）
- ルーティーン設定（起床、自動消灯など）
- マルチキャラ
- スマホアプリとの同期
- ホログラム表示
